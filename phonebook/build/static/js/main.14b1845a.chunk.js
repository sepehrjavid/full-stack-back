(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{25:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(20),s=n.n(a),u=(n(25),n(11)),i=n(5),o=n(3),j=n(6),b=n.n(j),l="/api/persons",d=n(0),h=function(e,t,n,c){window.confirm("Confirm delete?")&&function(e){return b.a.delete(l+"/"+e)}(e).then((function(r){var a=n.filter((function(t){return t.id!==e}));t(a),c(Object(i.a)(a))}))},m=function(e){var t=e.searchResult,n=e.persons,c=e.setPersons,r=e.setSearchResult;return Object(d.jsx)("div",{children:t.map((function(e,t){return Object(d.jsxs)("div",{children:[Object(d.jsxs)("p",{children:[e.name,": ",e.number]}),Object(d.jsx)("button",{onClick:function(){return h(e.id,c,n,r)},children:"Delete"})]},t)}))})},O=function(e){var t=e.addContact,n=e.newName,c=e.newNameChange,r=e.number,a=e.numberChange;return Object(d.jsx)("div",{children:Object(d.jsxs)("form",{onSubmit:t,children:[Object(d.jsxs)("div",{children:["name: ",Object(d.jsx)("input",{value:n,onChange:c})]}),Object(d.jsxs)("div",{children:["number: ",Object(d.jsx)("input",{value:r,onChange:a})]}),Object(d.jsx)("div",{children:Object(d.jsx)("button",{type:"submit",children:"add"})})]})})},f=function(e){var t=e.search,n=e.searchField,c=e.searchFieldChange;return Object(d.jsx)("div",{children:Object(d.jsx)("form",{onSubmit:t,children:Object(d.jsxs)("div",{children:["Filter shown with: ",Object(d.jsx)("input",{value:n,onChange:c})]})})})},v=function(e){var t=e.message,n=e.notifClassName;return null===t?null:Object(d.jsx)("div",{className:n,children:t})},x=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)([]),s=Object(o.a)(a,2),j=s[0],h=s[1],x=Object(c.useState)(""),p=Object(o.a)(x,2),g=p[0],C=p[1],S=Object(c.useState)(""),w=Object(o.a)(S,2),N=w[0],k=w[1],F=Object(c.useState)(""),R=Object(o.a)(F,2),T=R[0],D=R[1],P=Object(c.useState)(null),y=Object(o.a)(P,2),E=y[0],J=y[1],A=Object(c.useState)("error"),B=Object(o.a)(A,2),I=B[0],M=B[1];Object(c.useEffect)((function(){b.a.get(l).then((function(e){r(e.data),h(e.data)}))}),[]);return Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:"Phonebook"}),Object(d.jsx)(v,{message:E,notifClassName:I}),Object(d.jsx)(f,{search:function(e){e.preventDefault(),""===T?h(n):(h(n.filter((function(e){return e.name.match(T)}))),D(""))},searchField:T,searchFieldChange:function(e){D(e.target.value)}}),Object(d.jsx)("h2",{children:"Add New"}),Object(d.jsx)(O,{addContact:function(e){e.preventDefault();var t,c,a,s={name:g,number:N};if(n.map((function(e){return e.name})).includes(g)){var o=n.filter((function(e){return e.name===g}))[0];(t=o.id,c=N,b.a.put(l+"/"+t,{number:c})).then((function(e){var t=n.map((function(e){return e.name===s.name?Object(u.a)(Object(u.a)({},e),{},{number:s.number}):e}));r(t),C(""),k(""),h(Object(i.a)(t)),J("Contact updated"),M("message"),setTimeout((function(){J(null)}),5e3)})).catch((function(e){J(e.response.data.error),M("error"),setTimeout((function(){J(null)}),5e3)}))}else(a=s,b.a.post(l,a)).then((function(e){var t=n.concat(e.data);r(t),C(""),k(""),h(Object(i.a)(t)),J("Contact added"),M("message"),setTimeout((function(){J(null)}),5e3)})).catch((function(e){J(e.response.data.error),M("error"),setTimeout((function(){J(null)}),5e3)}))},newName:g,newNameChange:function(e){C(e.target.value)},number:N,numberChange:function(e){k(e.target.value)}}),Object(d.jsx)("h2",{children:"Numbers"}),Object(d.jsx)(m,{searchResult:j,persons:n,setPersons:r,setSearchResult:h})]})};s.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(x,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.14b1845a.chunk.js.map