(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{25:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(20),s=n.n(r),u=(n(25),n(11)),i=n(5),o=n(3),j=n(6),b=n.n(j),d="/api/persons",l=n(0),h=function(e,t,n,c){window.confirm("Confirm delete?")&&function(e){return b.a.delete(d+"/"+e)}(e).then((function(a){var r=n.filter((function(t){return t.id!==e}));t(r),c(Object(i.a)(r))}))},m=function(e){var t=e.searchResult,n=e.persons,c=e.setPersons,a=e.setSearchResult;return Object(l.jsx)("div",{children:t.map((function(e,t){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("p",{children:[e.name,": ",e.number]}),Object(l.jsx)("button",{onClick:function(){return h(e.id,c,n,a)},children:"Delete"})]},t)}))})},O=function(e){var t=e.addContact,n=e.newName,c=e.newNameChange,a=e.number,r=e.numberChange;return Object(l.jsx)("div",{children:Object(l.jsxs)("form",{onSubmit:t,children:[Object(l.jsxs)("div",{children:["name: ",Object(l.jsx)("input",{value:n,onChange:c})]}),Object(l.jsxs)("div",{children:["number: ",Object(l.jsx)("input",{value:a,onChange:r})]}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{type:"submit",children:"add"})})]})})},f=function(e){var t=e.search,n=e.searchField,c=e.searchFieldChange;return Object(l.jsx)("div",{children:Object(l.jsx)("form",{onSubmit:t,children:Object(l.jsxs)("div",{children:["Filter shown with: ",Object(l.jsx)("input",{value:n,onChange:c})]})})})},v=function(e){var t=e.message,n=e.notifClassName;return null===t?null:Object(l.jsx)("div",{className:n,children:t})},x=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),s=Object(o.a)(r,2),j=s[0],h=s[1],x=Object(c.useState)(""),p=Object(o.a)(x,2),g=p[0],C=p[1],S=Object(c.useState)(""),w=Object(o.a)(S,2),N=w[0],k=w[1],F=Object(c.useState)(""),R=Object(o.a)(F,2),y=R[0],D=R[1],P=Object(c.useState)(null),T=Object(o.a)(P,2),E=T[0],I=T[1],J=Object(c.useState)("error"),A=Object(o.a)(J,2),B=A[0],M=A[1];Object(c.useEffect)((function(){b.a.get(d).then((function(e){a(e.data),h(e.data)}))}),[]);return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"Phonebook"}),Object(l.jsx)(v,{message:E,notifClassName:B}),Object(l.jsx)(f,{search:function(e){e.preventDefault(),""===y?h(n):(h(n.filter((function(e){return e.name.match(y)}))),D(""))},searchField:y,searchFieldChange:function(e){D(e.target.value)}}),Object(l.jsx)("h2",{children:"Add New"}),Object(l.jsx)(O,{addContact:function(e){e.preventDefault();var t,c,r,s={name:g,number:N};if(n.map((function(e){return e.name})).includes(g)){var o=n.filter((function(e){return e.name===g}))[0];(t=o.id,c=N,b.a.patch(d+"/"+t,{number:c})).then((function(e){var t=n.map((function(e){return e.name===s.name?Object(u.a)(Object(u.a)({},e),{},{number:s.number}):e}));a(t),C(""),k(""),h(Object(i.a)(t)),I("Contact updated"),M("message"),setTimeout((function(){I(null)}),5e3)})).catch((function(e){I("Information of ".concat(g," has already been removed")),M("error"),setTimeout((function(){I(null)}),5e3)}))}else(r=s,b.a.post(d,r)).then((function(e){var t=n.concat(e.data);a(t),C(""),k(""),h(Object(i.a)(t)),I("Contact added"),M("message"),setTimeout((function(){I(null)}),5e3)}))},newName:g,newNameChange:function(e){C(e.target.value)},number:N,numberChange:function(e){k(e.target.value)}}),Object(l.jsx)("h2",{children:"Numbers"}),Object(l.jsx)(m,{searchResult:j,persons:n,setPersons:a,setSearchResult:h})]})};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(x,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.6f9a0c02.chunk.js.map